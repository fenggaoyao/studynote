# 星期日

- 菜单逻辑
    - 服务定义功能权限点
    - 前端当你建了一个菜单，这时才有applicationItem,才绑定功能点到菜单上
    - 最终反应router

```
export const SETTING_MANAGEMENT_ROUTE_PROVIDERS = [
  { provide: APP_INITIALIZER, useFactory: configureRoutes, deps: [RoutesService], multi: true },
  {
    provide: APP_INITIALIZER,
    useFactory: hideRoutes,
    deps: [RoutesService, SettingTabsService],
    multi: true,
  },
];

export function configureRoutes(routesService: RoutesService) {
  return () => {
    routesService.add([
      {
        name: eSettingManagementRouteNames.Settings,
        path: '/setting-management',
        parentName: eThemeSharedRouteNames.Administration,
        layout: eLayoutType.application,
        order: 100,
        iconClass: 'fa fa-cog',
      },
    ]);
  };
}

 <ng-container
    *ngFor="let route of routesService.visible$ | async; trackBy: trackByFn"
    [ngTemplateOutlet]="isDropdown(route) ? dropdownLink : defaultLink"
    [ngTemplateOutletContext]="{ $implicit: route }"
  >
  </ng-container>
```



- 变化
 - 利用proxy,当响应式对象进行get,set操作，从而重新触发effect函数(render)
 - 使用发布订阅的方法，当对象变化时，publish(dispatch) ，然后subscribe到然后触发render函数