<pre id="container"></pre>
<style>
    .keywords{
        font-size: large;
        padding: 10px;
        color: red;
    }
    .indentifier{
        color: blue;
    }
    .punctuator{
        color: black;
    }
</style>
<script>

 const container=document.getElementById("container")   
var source=`
    function sleep(t){
        return new Promise(function(resolve){
            setTimeout(resolve,t)
        })
    }`


 var regexp= /(function|new|return)|([ \t\n\r]+)|([a-zA-Z][a-zA-Z0-9]*)|(\(|\)|\{|\}|,|;)/g

 var dictionary=["keywords","whitespace","indentifier","punctuator"]
 var token;
 var lastindex=0
 do{
     //console.log(regexp.lastIndex)
     lastindex=regexp.lastIndex
     content=regexp.exec(source)  
     const text=document.createElement('span')
    

     for(var i=1;i<5;i++){
         if(content&&content[i]){
            token=content[i]         
            console.log("type",dictionary[i-1],token);
            text.textContent=token
            text.classList.add(dictionary[i-1])
         }
         
     }
     container.append(text)
    // console.log(token.length,regexp.lastIndex-lastindex)
 }
 while(token.length===regexp.lastIndex-lastindex) //
</script>