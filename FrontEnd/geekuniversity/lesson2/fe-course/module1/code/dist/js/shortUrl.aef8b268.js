(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shortUrl"],{"107c":function(t,e,r){var n=r("d039");t.exports=n((function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,r){"use strict";var n=r("d784"),o=r("44e7"),i=r("825a"),a=r("1d80"),c=r("4840"),u=r("8aa5"),s=r("50c4"),l=r("14c3"),f=r("9263"),h=r("9f7f"),p=r("d039"),d=h.UNSUPPORTED_Y,g=[].push,v=Math.min,y=4294967295,x=!p((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));n("split",(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(a(this)),i=void 0===r?y:r>>>0;if(0===i)return[];if(void 0===t)return[n];if(!o(t))return e.call(n,t,i);var c,u,s,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,d=new RegExp(t.source,h+"g");while(c=f.call(d,n)){if(u=d.lastIndex,u>p&&(l.push(n.slice(p,c.index)),c.length>1&&c.index<n.length&&g.apply(l,c.slice(1)),s=c[0].length,p=u,l.length>=i))break;d.lastIndex===c.index&&d.lastIndex++}return p===n.length?!s&&d.test("")||l.push(""):l.push(n.slice(p)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=a(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,o,r):n.call(String(o),e,r)},function(t,o){var a=r(n,this,t,o,n!==e);if(a.done)return a.value;var f=i(this),h=String(t),p=c(f,RegExp),g=f.unicode,x=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(d?"g":"y"),m=new p(d?"^(?:"+f.source+")":f,x),w=void 0===o?y:o>>>0;if(0===w)return[];if(0===h.length)return null===l(m,h)?[h]:[];var b=0,R=0,E=[];while(R<h.length){m.lastIndex=d?0:R;var j,O=l(m,d?h.slice(R):h);if(null===O||(j=v(s(m.lastIndex+(d?R:0)),h.length))===b)R=u(h,R,g);else{if(E.push(h.slice(b,R)),E.length===w)return E;for(var L=1;L<=O.length-1;L++)if(E.push(O[L]),E.length===w)return E;R=b=j}}return E.push(h.slice(b)),E}]}),!x,d)},"14c3":function(t,e,r){var n=r("c6b6"),o=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var i=r.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("d3b7");function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))}}},"25a0":function(t,e,r){},"44e7":function(t,e,r){var n=r("861d"),o=r("c6b6"),i=r("b622"),a=i("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==o(t))}},"8aa5":function(t,e,r){"use strict";var n=r("6547").charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},9263:function(t,e,r){"use strict";var n=r("ad6d"),o=r("9f7f"),i=r("5692"),a=r("7c73"),c=r("69f3").get,u=r("fce3"),s=r("107c"),l=RegExp.prototype.exec,f=i("native-string-replace",String.prototype.replace),h=l,p=function(){var t=/a/,e=/b*/g;return l.call(t,"a"),l.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),d=o.UNSUPPORTED_Y||o.BROKEN_CARET,g=void 0!==/()??/.exec("")[1],v=p||g||d||u||s;v&&(h=function(t){var e,r,o,i,u,s,v,y=this,x=c(y),m=x.raw;if(m)return m.lastIndex=y.lastIndex,e=h.call(m,t),y.lastIndex=m.lastIndex,e;var w=x.groups,b=d&&y.sticky,R=n.call(y),E=y.source,j=0,O=t;if(b&&(R=R.replace("y",""),-1===R.indexOf("g")&&(R+="g"),O=String(t).slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==t[y.lastIndex-1])&&(E="(?: "+E+")",O=" "+O,j++),r=new RegExp("^(?:"+E+")",R)),g&&(r=new RegExp("^"+E+"$(?!\\s)",R)),p&&(o=y.lastIndex),i=l.call(b?r:y,O),b?i?(i.input=i.input.slice(j),i[0]=i[0].slice(j),i.index=y.lastIndex,y.lastIndex+=i[0].length):y.lastIndex=0:p&&i&&(y.lastIndex=y.global?i.index+i[0].length:o),g&&i&&i.length>1&&f.call(i[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)})),i&&w)for(i.groups=s=a(null),u=0;u<w.length;u++)v=w[u],s[v[0]]=i[v[1]];return i}),t.exports=h},"96cf":function(t,e){!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",s="object"===typeof t,l=e.regeneratorRuntime;if(l)s&&(t.exports=l);else{l=e.regeneratorRuntime=s?t.exports:{},l.wrap=w;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={},v={};v[a]=function(){return this};var y=Object.getPrototypeOf,x=y&&y(y(P([])));x&&x!==n&&o.call(x,a)&&(v=x);var m=j.prototype=R.prototype=Object.create(v);E.prototype=m.constructor=j,j.constructor=E,j[u]=E.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,j):(t.__proto__=j,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(m),t},l.awrap=function(t){return{__await:t}},O(L.prototype),L.prototype[c]=function(){return this},l.AsyncIterator=L,l.async=function(t,e,r,n){var o=new L(w(t,e,r,n));return l.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(m),m[u]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=P,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}}}function w(t,e,r,n){var o=e&&e.prototype instanceof R?e:R,i=Object.create(o.prototype),a=new U(n||[]);return i._invoke=_(t,r,a),i}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}function R(){}function E(){}function j(){}function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function L(t){function e(r,n,i,a){var c=b(t[r],t,n);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"===typeof s&&o.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),a)}a(c.arg)}var r;function n(t,n){function o(){return new Promise((function(r,o){e(t,n,r,o)}))}return r=r?r.then(o,o):o()}this._invoke=n}function _(t,e,r){var n=f;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return A()}r.method=o,r.arg=i;while(1){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=b(t,e,r);if("normal"===u.type){if(n=r.done?d:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}function k(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,k(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=b(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,g;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function U(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function P(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){while(++n<t.length)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},"9f7f":function(t,e,r){var n=r("d039"),o=function(t,e){return RegExp(t,e)};e.UNSUPPORTED_Y=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,r){"use strict";var n=r("23e7"),o=r("44ad"),i=r("fc6a"),a=r("a640"),c=[].join,u=o!=Object,s=a("join",",");n({target:"Array",proto:!0,forced:u||!s},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a4a0:function(t,e,r){"use strict";r("25a0")},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},a89f:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shortURL"},[r("section",{staticClass:"tool"},[r("a",{on:{click:t.showAllData}},[t._v("索引数据")])]),r("section",{staticClass:"input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.longUrl,expression:"longUrl"}],domProps:{value:t.longUrl},on:{input:function(e){e.target.composing||(t.longUrl=e.target.value)}}}),r("a",{staticClass:"btn",on:{click:t.doShort}},[t._v("生成短网址")])]),r("section",[t._v(t._s(t.shortUrl))]),r("section",{staticClass:"indexData"},t._l(t.values,(function(e){return r("div",{key:e.id,staticClass:"url-item"},[t._v(" "+t._s(e.urlKey)+", "+t._s(e.url)+" ")])})),0)])},o=[],i=r("1da1"),a=(r("96cf"),r("ac1f"),r("1276"),r("a15b"),r("d3b7"),r("ddb0"),"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-+".split("")),c={name:"shortURL",data:function(){return{db:null,longUrl:"",shortUrl:"",values:[]}},created:function(){this.createDB(),console.log(this.to64(64))},methods:{createDB:function(){var t=this,e=window.indexedDB.open("shortURL",1);e.onerror=function(t){console.log(t)},e.onsuccess=function(e){t.db=e.target.result},e.onupgradeneeded=function(e){t.db=e.target.result;var r=t.db.createObjectStore("shortURLs",{keyPath:"id",autoIncrement:!0});r.createIndex("url","url",{unique:!1}),r.createIndex("urlKey","urlKey",{unique:!1}),console.log("Database setup complete")}},doShort:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.longUrl){e.next=2;break}return e.abrupt("return");case 2:t.db?(r=t.getObjectStore(),r.add({url:t.longUrl}).onsuccess=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.target.result,console.log("add sucess>>",n),e.next=4,t.shorten(n);case 4:t.shortUrl=e.sent,t.shortUrl="https://a.b/"+t.shortUrl;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log("error");case 3:case"end":return e.stop()}}),e)})))()},getObjectStore:function(){return this.db.transaction(["shortURLs"],"readwrite").objectStore("shortURLs")},shorten:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.query(t);case 2:return n=r.sent,n.urlKey=e.to64(t),e.update(n),r.abrupt("return",n.urlKey);case 6:case"end":return r.stop()}}),r)})))()},to64:function(t){var e=[],r=t;while(r)e.push(a[r%64]),r=Math.floor(r/64);return e.reverse().join("")},add:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.getObjectStore(),o=n.add(t),o.onsuccess=function(){return console.log("数据写入成功!"),!0},o.onerror=function(){console.log("数据写入失败!")};case 4:case"end":return r.stop()}}),r)})))()},update:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.getObjectStore(),o=n.put(t),o.onsuccess=function(){console.log("数据更新成功!")},o.onerror=function(){console.log("数据更新失败!")};case 4:case"end":return r.stop()}}),r)})))()},remove:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.getObjectStore(),o=n.delete(t),o.onsuccess=function(){console.log("数据删除成功!")},o.onerror=function(){console.log("数据删除失败!")};case 4:case"end":return r.stop()}}),r)})))()},query:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){var o=e.getObjectStore(),i=o.get(t);i.onsuccess=function(t){console.log(t),r(t.target.result)},i.onerror=function(t){console.log(t),console.log("数据查询失败!"),n(t)}})));case 1:case"end":return r.stop()}}),r)})))()},queryAll:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=t.getObjectStore(),n=[];r.openCursor().onsuccess=function(t){var r=t.target.result;r?(n.push(r.value),r.continue()):(console.log("done",n),e(n))}})));case 1:case"end":return e.stop()}}),e)})))()},showAllData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.queryAll();case 2:t.values=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},u=c,s=(r("a4a0"),r("0c7c")),l=Object(s["a"])(u,n,o,!1,null,"3d3935ee",null);e["default"]=l.exports},ac1f:function(t,e,r){"use strict";var n=r("23e7"),o=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(t,e,r){"use strict";var n=r("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,r){"use strict";r("ac1f");var n=r("6eeb"),o=r("9263"),i=r("d039"),a=r("b622"),c=r("9112"),u=a("species"),s=RegExp.prototype;t.exports=function(t,e,r,l){var f=a(t),h=!i((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=h&&!i((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[u]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return e=!0,null},r[f](""),!e}));if(!h||!p||r){var d=/./[f],g=e(f,""[t],(function(t,e,r,n,i){var a=e.exec;return a===o||a===s.exec?h&&!i?{done:!0,value:d.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}));n(String.prototype,t,g[0]),n(s,f,g[1])}l&&c(s[f],"sham",!0)}},fce3:function(t,e,r){var n=r("d039");t.exports=n((function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=shortUrl.aef8b268.js.map